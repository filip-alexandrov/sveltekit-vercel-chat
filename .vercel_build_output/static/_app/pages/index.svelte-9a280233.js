import{S as ie,i as ue,s as ce,e as h,t as M,c as _,a as w,h as D,d as a,b as u,g as H,J as l,j as Pe,K as re,f as le,q as z,o as Q,L as ye,M as Ue,N as ae,O as Be,P as Ce,Q as Oe,k as O,m as A,R as K,n as fe,p as de,T as pe,U as Ae,w as he,x as _e,y as me,B as be,V as Y,W as Le,X as Te,Y as Ie,Z as Re,l as Ee}from"../chunks/vendor-f0aad510.js";import{g as oe,a as te}from"../chunks/firebase-347b01cd.js";import"../chunks/singletons-d1fb5791.js";function Se(i){let e,r;return{c(){e=h("div"),r=M(i[0]),this.h()},l(t){e=_(t,"DIV",{class:!0});var o=w(e);r=D(o,i[0]),o.forEach(a),this.h()},h(){u(e,"class","w3-panel w3-pale-red w3-text-red w3-leftbar w3-border-red")},m(t,o){H(t,e,o),l(e,r)},p(t,[o]){o&1&&Pe(r,t[0])},i:re,o:re,d(t){t&&a(e)}}}function Me(i,e,r){let{message:t}=e;return i.$$set=o=>{"message"in o&&r(0,t=o.message)},[t]}class Ne extends ie{constructor(e){super();ue(this,e,Me,Se,ce,{message:0})}}function De(i){let e,r,t,o,c,f,n,b,s,d,L,I,k,G,V,y;return{c(){e=h("div"),r=h("h2"),t=M("Logged in"),o=O(),c=h("div"),f=h("p"),n=h("i"),b=O(),s=h("p"),d=M("Logged in"),L=O(),I=h("p"),k=h("button"),G=M("Log out"),this.h()},l(P){e=_(P,"DIV",{class:!0});var v=w(e);r=_(v,"H2",{});var B=w(r);t=D(B,"Logged in"),B.forEach(a),v.forEach(a),o=A(P),c=_(P,"DIV",{class:!0});var S=w(c);f=_(S,"P",{class:!0});var F=w(f);n=_(F,"I",{class:!0}),w(n).forEach(a),F.forEach(a),b=A(S),s=_(S,"P",{class:!0});var R=w(s);d=D(R,"Logged in"),R.forEach(a),L=A(S),I=_(S,"P",{});var p=w(I);k=_(p,"BUTTON",{class:!0,style:!0});var C=w(k);G=D(C,"Log out"),C.forEach(a),p.forEach(a),S.forEach(a),this.h()},h(){u(e,"class","w3-container"),u(n,"class","fas fa-check fa-5x"),u(f,"class","w3-large w3-text-green w3-center"),u(s,"class","w3-center"),u(k,"class","w3-button w3-blue"),le(k,"width","100%"),u(c,"class","w3-container")},m(P,v){H(P,e,v),l(e,r),l(r,t),H(P,o,v),H(P,c,v),l(c,f),l(f,n),l(c,b),l(c,s),l(s,d),l(c,L),l(c,I),l(I,k),l(k,G),V||(y=K(k,"click",i[9]),V=!0)},p:re,i:re,o:re,d(P){P&&a(e),P&&a(o),P&&a(c),V=!1,y()}}}function Ve(i){let e,r,t=i[0]==="login"?"Login":"Register",o,c,f,n,b,s,d,L,I,k,G,V,y,P,v,B,S,F,R,p,C,g,N,U,X;const J=[Fe,Ge],W=[];function T(m,E){return m[0]==="login"?0:1}return P=T(i),v=W[P]=J[P](i),{c(){e=h("div"),r=h("h2"),o=M(t),c=M(" to Serverless Chat"),f=O(),n=h("div"),b=h("div"),s=h("button"),d=M("LOGIN"),I=O(),k=h("button"),G=M("REGISTER"),y=O(),v.c(),B=O(),S=h("hr"),F=O(),R=h("p"),p=h("button"),C=h("i"),g=M(" Sign in with Google"),this.h()},l(m){e=_(m,"DIV",{class:!0});var E=w(e);r=_(E,"H2",{class:!0});var j=w(r);o=D(j,t),c=D(j," to Serverless Chat"),j.forEach(a),E.forEach(a),f=A(m),n=_(m,"DIV",{class:!0});var q=w(n);b=_(q,"DIV",{class:!0});var Z=w(b);s=_(Z,"BUTTON",{class:!0,style:!0});var $=w(s);d=D($,"LOGIN"),$.forEach(a),I=A(Z),k=_(Z,"BUTTON",{class:!0,style:!0});var se=w(k);G=D(se,"REGISTER"),se.forEach(a),Z.forEach(a),y=A(q),v.l(q),B=A(q),S=_(q,"HR",{}),F=A(q),R=_(q,"P",{});var x=w(R);p=_(x,"BUTTON",{class:!0,style:!0});var ee=w(p);C=_(ee,"I",{class:!0}),w(C).forEach(a),g=D(ee," Sign in with Google"),ee.forEach(a),x.forEach(a),q.forEach(a),this.h()},h(){u(r,"class","w3-center"),u(e,"class","w3-container"),u(s,"class",L="w3-bar-item w3-button w3-text-center "+(i[0]==="login"&&"w3-blue")),le(s,"width","50%"),u(k,"class",V="w3-bar-item w3-button w3-text-center "+(i[0]==="register"&&"w3-blue")),le(k,"width","50%"),u(b,"class","w3-bar w3-center w3-border-bottom w3-border-gray w3-text-dark-gray"),u(C,"class","fab fa-google"),u(p,"class","w3-button w3-blue"),le(p,"width","100%"),u(n,"class","w3-container")},m(m,E){H(m,e,E),l(e,r),l(r,o),l(r,c),H(m,f,E),H(m,n,E),l(n,b),l(b,s),l(s,d),l(b,I),l(b,k),l(k,G),l(n,y),W[P].m(n,null),l(n,B),l(n,S),l(n,F),l(n,R),l(R,p),l(p,C),l(p,g),N=!0,U||(X=[K(s,"click",i[11]),K(k,"click",i[12]),K(p,"click",i[10])],U=!0)},p(m,E){(!N||E&1)&&t!==(t=m[0]==="login"?"Login":"Register")&&Pe(o,t),(!N||E&1&&L!==(L="w3-bar-item w3-button w3-text-center "+(m[0]==="login"&&"w3-blue")))&&u(s,"class",L),(!N||E&1&&V!==(V="w3-bar-item w3-button w3-text-center "+(m[0]==="register"&&"w3-blue")))&&u(k,"class",V);let j=P;P=T(m),P===j?W[P].p(m,E):(fe(),Q(W[j],1,1,()=>{W[j]=null}),de(),v=W[P],v?v.p(m,E):(v=W[P]=J[P](m),v.c()),z(v,1),v.m(n,B))},i(m){N||(z(v),N=!0)},o(m){Q(v),N=!1},d(m){m&&a(e),m&&a(f),m&&a(n),W[P].d(),U=!1,pe(X)}}}function Ge(i){let e,r,t,o,c,f,n,b,s,d,L,I,k,G,V,y,P,v,B,S,F,R,p,C,g,N,U,X,J,W,T=i[6]&&ve(i);return{c(){e=h("form"),T&&T.c(),r=O(),t=h("h4"),o=M("Register"),c=O(),f=h("p"),n=h("label"),b=M("Email"),s=O(),d=h("input"),L=O(),I=h("p"),k=h("label"),G=M("Password"),V=O(),y=h("input"),P=O(),v=h("p"),B=h("label"),S=M("Confirm Password"),F=O(),R=h("input"),p=O(),C=h("p"),g=h("button"),N=M("Register"),this.h()},l(m){e=_(m,"FORM",{});var E=w(e);T&&T.l(E),r=A(E),t=_(E,"H4",{});var j=w(t);o=D(j,"Register"),j.forEach(a),c=A(E),f=_(E,"P",{});var q=w(f);n=_(q,"LABEL",{for:!0});var Z=w(n);b=D(Z,"Email"),Z.forEach(a),s=A(q),d=_(q,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0}),q.forEach(a),L=A(E),I=_(E,"P",{});var $=w(I);k=_($,"LABEL",{for:!0});var se=w(k);G=D(se,"Password"),se.forEach(a),V=A($),y=_($,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0}),$.forEach(a),P=A(E),v=_(E,"P",{});var x=w(v);B=_(x,"LABEL",{for:!0});var ee=w(B);S=D(ee,"Confirm Password"),ee.forEach(a),F=A(x),R=_(x,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0}),x.forEach(a),p=A(E),C=_(E,"P",{});var we=w(C);g=_(we,"BUTTON",{type:!0,class:!0});var ge=w(g);N=D(ge,"Register"),ge.forEach(a),we.forEach(a),E.forEach(a),this.h()},h(){u(n,"for","r-email"),u(d,"type","email"),u(d,"class","w3-input w3-border"),u(d,"placeholder","Enter your email"),u(d,"id","r-email"),u(k,"for","r-password"),u(y,"type","password"),u(y,"class","w3-input w3-border"),u(y,"placeholder","Enter a password"),u(y,"id","r-password"),u(B,"for","r-cpassword"),u(R,"type","password"),u(R,"class","w3-input w3-border"),u(R,"placeholder","Re-enter that password"),u(R,"id","r-cpassword"),u(g,"type","submit"),u(g,"class","w3-button w3-blue")},m(m,E){H(m,e,E),T&&T.m(e,null),l(e,r),l(e,t),l(t,o),l(e,c),l(e,f),l(f,n),l(n,b),l(f,s),l(f,d),Y(d,i[1]),l(e,L),l(e,I),l(I,k),l(k,G),l(I,V),l(I,y),Y(y,i[2]),l(e,P),l(e,v),l(v,B),l(B,S),l(v,F),l(v,R),Y(R,i[3]),l(e,p),l(e,C),l(C,g),l(g,N),X=!0,J||(W=[K(d,"input",i[15]),K(y,"input",i[16]),K(R,"input",i[17]),K(e,"submit",Le(i[8]))],J=!0)},p(m,E){m[6]?T?(T.p(m,E),E&64&&z(T,1)):(T=ve(m),T.c(),z(T,1),T.m(e,r)):T&&(fe(),Q(T,1,1,()=>{T=null}),de()),E&2&&d.value!==m[1]&&Y(d,m[1]),E&4&&y.value!==m[2]&&Y(y,m[2]),E&8&&R.value!==m[3]&&Y(R,m[3])},i(m){X||(z(T),U||Te(()=>{U=Ie(e,Re,{}),U.start()}),X=!0)},o(m){Q(T),X=!1},d(m){m&&a(e),T&&T.d(),J=!1,pe(W)}}}function Fe(i){let e,r,t,o,c,f,n,b,s,d,L,I,k,G,V,y,P,v,B,S,F,R,p,C,g=i[6]&&ke(i);return{c(){e=h("form"),g&&g.c(),r=O(),t=h("h4"),o=M("Login"),c=O(),f=h("p"),n=h("label"),b=M("Email"),s=O(),d=h("input"),L=O(),I=h("p"),k=h("label"),G=M("Password"),V=O(),y=h("input"),P=O(),v=h("p"),B=h("button"),S=M("Login"),this.h()},l(N){e=_(N,"FORM",{});var U=w(e);g&&g.l(U),r=A(U),t=_(U,"H4",{});var X=w(t);o=D(X,"Login"),X.forEach(a),c=A(U),f=_(U,"P",{});var J=w(f);n=_(J,"LABEL",{for:!0});var W=w(n);b=D(W,"Email"),W.forEach(a),s=A(J),d=_(J,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0}),J.forEach(a),L=A(U),I=_(U,"P",{});var T=w(I);k=_(T,"LABEL",{for:!0});var m=w(k);G=D(m,"Password"),m.forEach(a),V=A(T),y=_(T,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0}),T.forEach(a),P=A(U),v=_(U,"P",{});var E=w(v);B=_(E,"BUTTON",{type:!0,class:!0});var j=w(B);S=D(j,"Login"),j.forEach(a),E.forEach(a),U.forEach(a),this.h()},h(){u(n,"for","l-email"),u(d,"type","email"),u(d,"class","w3-input w3-border"),u(d,"placeholder","Enter your email"),u(d,"id","l-email"),u(k,"for","l-password"),u(y,"type","password"),u(y,"class","w3-input w3-border"),u(y,"placeholder","Enter your password"),u(y,"id","l-password"),u(B,"type","submit"),u(B,"class","w3-button w3-blue")},m(N,U){H(N,e,U),g&&g.m(e,null),l(e,r),l(e,t),l(t,o),l(e,c),l(e,f),l(f,n),l(n,b),l(f,s),l(f,d),Y(d,i[4]),l(e,L),l(e,I),l(I,k),l(k,G),l(I,V),l(I,y),Y(y,i[5]),l(e,P),l(e,v),l(v,B),l(B,S),R=!0,p||(C=[K(d,"input",i[13]),K(y,"input",i[14]),K(e,"submit",Le(i[7]))],p=!0)},p(N,U){N[6]?g?(g.p(N,U),U&64&&z(g,1)):(g=ke(N),g.c(),z(g,1),g.m(e,r)):g&&(fe(),Q(g,1,1,()=>{g=null}),de()),U&16&&d.value!==N[4]&&Y(d,N[4]),U&32&&y.value!==N[5]&&Y(y,N[5])},i(N){R||(z(g),F||Te(()=>{F=Ie(e,Re,{}),F.start()}),R=!0)},o(N){Q(g),R=!1},d(N){N&&a(e),g&&g.d(),p=!1,pe(C)}}}function ve(i){let e,r;return e=new Ne({props:{message:i[6]}}),{c(){he(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,o){me(e,t,o),r=!0},p(t,o){const c={};o&64&&(c.message=t[6]),e.$set(c)},i(t){r||(z(e.$$.fragment,t),r=!0)},o(t){Q(e.$$.fragment,t),r=!1},d(t){be(e,t)}}}function ke(i){let e,r;return e=new Ne({props:{message:i[6]}}),{c(){he(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,o){me(e,t,o),r=!0},p(t,o){const c={};o&64&&(c.message=t[6]),e.$set(c)},i(t){r||(z(e.$$.fragment,t),r=!0)},o(t){Q(e.$$.fragment,t),r=!1},d(t){be(e,t)}}}function He(i){let e,r,t,o;const c=[Ve,De],f=[];function n(b,s){return 0}return r=n(),t=f[r]=c[r](i),{c(){e=h("div"),t.c(),this.h()},l(b){e=_(b,"DIV",{class:!0,style:!0});var s=w(e);t.l(s),s.forEach(a),this.h()},h(){u(e,"class","w3-card-4"),le(e,"width","40%"),le(e,"margin","1rem auto")},m(b,s){H(b,e,s),f[r].m(e,null),o=!0},p(b,[s]){t.p(b,s)},i(b){o||(z(t),o=!0)},o(b){Q(t),o=!1},d(b){b&&a(e),f[r].d()}}}function We(i,e,r){ye(te,p=>{p?(p.uid,oe("/chat")):oe("/")});const t=Ue(),o=new ae;let c="",f="",n="",b="yohandentzki@gmail.com",s="000000",{authMode:d="register"}=e,L=null;function I(){if(!b||!s){r(6,L="Fill out all fields!"),r(5,s="");return}r(6,L=""),Be(te,b,s).then(p=>{t("done"),t("auth"),p.user,r(4,b=""),r(5,s="")}).catch(p=>{const C=p.code,g=p.message;r(5,s=""),r(6,L=`(${C}) ${g}`)})}function k(){if(!c||!f||!n){r(6,L="Fill out all fields!");return}if(f!==n){r(6,L="Passwords don't match!");return}r(6,L=""),Ae(te,c,f).then(p=>{t("done"),t("auth"),r(1,c=""),r(2,f=""),r(3,n="")}).catch(p=>{const C=p.code,g=p.message;r(6,L=`(${C}) ${g}`),r(2,f=""),r(3,n="")})}function G(){Ce(te).then(()=>{t("done"),t("logout")}).catch(p=>{throw new Error(p)})}function V(){Oe(te,o).then(p=>{ae.credentialFromResult(p).accessToken,p.user,t("auth"),t("done")}).catch(p=>{const C=p.code,g=p.message;p.email,ae.credentialFromError(p),r(6,L=`(${C}) ${g}`)})}const y=()=>r(0,d="login"),P=()=>r(0,d="register");function v(){b=this.value,r(4,b)}function B(){s=this.value,r(5,s)}function S(){c=this.value,r(1,c)}function F(){f=this.value,r(2,f)}function R(){n=this.value,r(3,n)}return i.$$set=p=>{"authMode"in p&&r(0,d=p.authMode)},[d,c,f,n,b,s,L,I,k,G,V,y,P,v,B,S,F,R]}class je extends ie{constructor(e){super();ue(this,e,We,He,ce,{authMode:0})}}function qe(i){let e,r,t,o,c,f,n,b;return n=new je({}),n.$on("auth",i[0]),{c(){e=h("h1"),r=M("Serverless Chat"),t=O(),o=h("p"),c=M("Please log in"),f=O(),he(n.$$.fragment),this.h()},l(s){e=_(s,"H1",{class:!0});var d=w(e);r=D(d,"Serverless Chat"),d.forEach(a),t=A(s),o=_(s,"P",{class:!0});var L=w(o);c=D(L,"Please log in"),L.forEach(a),f=A(s),_e(n.$$.fragment,s),this.h()},h(){u(e,"class","w3-jumbo w3-center"),u(o,"class","w3-large w3-center")},m(s,d){H(s,e,d),l(e,r),H(s,t,d),H(s,o,d),l(o,c),H(s,f,d),me(n,s,d),b=!0},p:re,i(s){b||(z(n.$$.fragment,s),b=!0)},o(s){Q(n.$$.fragment,s),b=!1},d(s){s&&a(e),s&&a(t),s&&a(o),s&&a(f),be(n,s)}}}function ze(i){let e,r,t=ne&&qe(i);return{c(){t&&t.c(),e=Ee()},l(o){t&&t.l(o),e=Ee()},m(o,c){t&&t.m(o,c),H(o,e,c),r=!0},p(o,[c]){ne&&t.p(o,c)},i(o){r||(z(t),r=!0)},o(o){Q(t),r=!1},d(o){t&&t.d(o),o&&a(e)}}}let ne=!1;ye(te,i=>{i&&(console.log("user found"),i.uid,oe("/chat"))}),ne=!0;function Je(i){return[()=>oe("/chat")]}class Ye extends ie{constructor(e){super();ue(this,e,Je,ze,ce,{})}}export{Ye as default};
