import{S as ue,i as ce,s as fe,e as h,t as S,c as _,a as w,h as D,d as a,b as c,g as H,J as l,j as Pe,K as re,f as le,q as W,o as J,L as ye,M as Ue,N as ie,O as Be,P as Ce,Q as Oe,k as O,m as A,R as Q,n as ae,p as ne,T as pe,U as Ae,w as de,x as he,y as _e,B as me,V as Y,W as Le,X as Te,Y as Ie,Z as Re,l as ge,v as Me}from"../chunks/vendor-0af294cd.js";import{g as oe,a as te}from"../chunks/navigation-bed5ce12.js";import"../chunks/singletons-d1fb5791.js";function Se(u){let e,r;return{c(){e=h("div"),r=S(u[0]),this.h()},l(t){e=_(t,"DIV",{class:!0});var s=w(e);r=D(s,u[0]),s.forEach(a),this.h()},h(){c(e,"class","w3-panel w3-pale-red w3-text-red w3-leftbar w3-border-red")},m(t,s){H(t,e,s),l(e,r)},p(t,[s]){s&1&&Pe(r,t[0])},i:re,o:re,d(t){t&&a(e)}}}function De(u,e,r){let{message:t}=e;return u.$$set=s=>{"message"in s&&r(0,t=s.message)},[t]}class Ne extends ue{constructor(e){super();ce(this,e,De,Se,fe,{message:0})}}function Ve(u){let e,r,t,s,i,f,n,b,o,p,L,I,k,G,V,y;return{c(){e=h("div"),r=h("h2"),t=S("Logged in"),s=O(),i=h("div"),f=h("p"),n=h("i"),b=O(),o=h("p"),p=S("Logged in"),L=O(),I=h("p"),k=h("button"),G=S("Log out"),this.h()},l(P){e=_(P,"DIV",{class:!0});var v=w(e);r=_(v,"H2",{});var B=w(r);t=D(B,"Logged in"),B.forEach(a),v.forEach(a),s=A(P),i=_(P,"DIV",{class:!0});var M=w(i);f=_(M,"P",{class:!0});var F=w(f);n=_(F,"I",{class:!0}),w(n).forEach(a),F.forEach(a),b=A(M),o=_(M,"P",{class:!0});var R=w(o);p=D(R,"Logged in"),R.forEach(a),L=A(M),I=_(M,"P",{});var d=w(I);k=_(d,"BUTTON",{class:!0,style:!0});var C=w(k);G=D(C,"Log out"),C.forEach(a),d.forEach(a),M.forEach(a),this.h()},h(){c(e,"class","w3-container"),c(n,"class","fas fa-check fa-5x"),c(f,"class","w3-large w3-text-green w3-center"),c(o,"class","w3-center"),c(k,"class","w3-button w3-blue"),le(k,"width","100%"),c(i,"class","w3-container")},m(P,v){H(P,e,v),l(e,r),l(r,t),H(P,s,v),H(P,i,v),l(i,f),l(f,n),l(i,b),l(i,o),l(o,p),l(i,L),l(i,I),l(I,k),l(k,G),V||(y=Q(k,"click",u[9]),V=!0)},p:re,i:re,o:re,d(P){P&&a(e),P&&a(s),P&&a(i),V=!1,y()}}}function Ge(u){let e,r,t=u[0]==="login"?"Login":"Register",s,i,f,n,b,o,p,L,I,k,G,V,y,P,v,B,M,F,R,d,C,g,N,U,X;const K=[He,Fe],j=[];function T(m,E){return m[0]==="login"?0:1}return P=T(u),v=j[P]=K[P](u),{c(){e=h("div"),r=h("h2"),s=S(t),i=S(" to Serverless Chat"),f=O(),n=h("div"),b=h("div"),o=h("button"),p=S("LOGIN"),I=O(),k=h("button"),G=S("REGISTER"),y=O(),v.c(),B=O(),M=h("hr"),F=O(),R=h("p"),d=h("button"),C=h("i"),g=S(" Sign in with Google"),this.h()},l(m){e=_(m,"DIV",{class:!0});var E=w(e);r=_(E,"H2",{class:!0});var q=w(r);s=D(q,t),i=D(q," to Serverless Chat"),q.forEach(a),E.forEach(a),f=A(m),n=_(m,"DIV",{class:!0});var z=w(n);b=_(z,"DIV",{class:!0});var Z=w(b);o=_(Z,"BUTTON",{class:!0,style:!0});var $=w(o);p=D($,"LOGIN"),$.forEach(a),I=A(Z),k=_(Z,"BUTTON",{class:!0,style:!0});var se=w(k);G=D(se,"REGISTER"),se.forEach(a),Z.forEach(a),y=A(z),v.l(z),B=A(z),M=_(z,"HR",{}),F=A(z),R=_(z,"P",{});var x=w(R);d=_(x,"BUTTON",{class:!0,style:!0});var ee=w(d);C=_(ee,"I",{class:!0}),w(C).forEach(a),g=D(ee," Sign in with Google"),ee.forEach(a),x.forEach(a),z.forEach(a),this.h()},h(){c(r,"class","w3-center"),c(e,"class","w3-container"),c(o,"class",L="w3-bar-item w3-button w3-text-center "+(u[0]==="login"&&"w3-blue")),le(o,"width","50%"),c(k,"class",V="w3-bar-item w3-button w3-text-center "+(u[0]==="register"&&"w3-blue")),le(k,"width","50%"),c(b,"class","w3-bar w3-center w3-border-bottom w3-border-gray w3-text-dark-gray"),c(C,"class","fab fa-google"),c(d,"class","w3-button w3-blue"),le(d,"width","100%"),c(n,"class","w3-container")},m(m,E){H(m,e,E),l(e,r),l(r,s),l(r,i),H(m,f,E),H(m,n,E),l(n,b),l(b,o),l(o,p),l(b,I),l(b,k),l(k,G),l(n,y),j[P].m(n,null),l(n,B),l(n,M),l(n,F),l(n,R),l(R,d),l(d,C),l(d,g),N=!0,U||(X=[Q(o,"click",u[11]),Q(k,"click",u[12]),Q(d,"click",u[10])],U=!0)},p(m,E){(!N||E&1)&&t!==(t=m[0]==="login"?"Login":"Register")&&Pe(s,t),(!N||E&1&&L!==(L="w3-bar-item w3-button w3-text-center "+(m[0]==="login"&&"w3-blue")))&&c(o,"class",L),(!N||E&1&&V!==(V="w3-bar-item w3-button w3-text-center "+(m[0]==="register"&&"w3-blue")))&&c(k,"class",V);let q=P;P=T(m),P===q?j[P].p(m,E):(ae(),J(j[q],1,1,()=>{j[q]=null}),ne(),v=j[P],v?v.p(m,E):(v=j[P]=K[P](m),v.c()),W(v,1),v.m(n,B))},i(m){N||(W(v),N=!0)},o(m){J(v),N=!1},d(m){m&&a(e),m&&a(f),m&&a(n),j[P].d(),U=!1,pe(X)}}}function Fe(u){let e,r,t,s,i,f,n,b,o,p,L,I,k,G,V,y,P,v,B,M,F,R,d,C,g,N,U,X,K,j,T=u[6]&&Ee(u);return{c(){e=h("form"),T&&T.c(),r=O(),t=h("h4"),s=S("Register"),i=O(),f=h("p"),n=h("label"),b=S("Email"),o=O(),p=h("input"),L=O(),I=h("p"),k=h("label"),G=S("Password"),V=O(),y=h("input"),P=O(),v=h("p"),B=h("label"),M=S("Confirm Password"),F=O(),R=h("input"),d=O(),C=h("p"),g=h("button"),N=S("Register"),this.h()},l(m){e=_(m,"FORM",{});var E=w(e);T&&T.l(E),r=A(E),t=_(E,"H4",{});var q=w(t);s=D(q,"Register"),q.forEach(a),i=A(E),f=_(E,"P",{});var z=w(f);n=_(z,"LABEL",{for:!0});var Z=w(n);b=D(Z,"Email"),Z.forEach(a),o=A(z),p=_(z,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0}),z.forEach(a),L=A(E),I=_(E,"P",{});var $=w(I);k=_($,"LABEL",{for:!0});var se=w(k);G=D(se,"Password"),se.forEach(a),V=A($),y=_($,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0}),$.forEach(a),P=A(E),v=_(E,"P",{});var x=w(v);B=_(x,"LABEL",{for:!0});var ee=w(B);M=D(ee,"Confirm Password"),ee.forEach(a),F=A(x),R=_(x,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0}),x.forEach(a),d=A(E),C=_(E,"P",{});var be=w(C);g=_(be,"BUTTON",{type:!0,class:!0});var we=w(g);N=D(we,"Register"),we.forEach(a),be.forEach(a),E.forEach(a),this.h()},h(){c(n,"for","r-email"),c(p,"type","email"),c(p,"class","w3-input w3-border"),c(p,"placeholder","Enter your email"),c(p,"id","r-email"),c(k,"for","r-password"),c(y,"type","password"),c(y,"class","w3-input w3-border"),c(y,"placeholder","Enter a password"),c(y,"id","r-password"),c(B,"for","r-cpassword"),c(R,"type","password"),c(R,"class","w3-input w3-border"),c(R,"placeholder","Re-enter that password"),c(R,"id","r-cpassword"),c(g,"type","submit"),c(g,"class","w3-button w3-blue")},m(m,E){H(m,e,E),T&&T.m(e,null),l(e,r),l(e,t),l(t,s),l(e,i),l(e,f),l(f,n),l(n,b),l(f,o),l(f,p),Y(p,u[1]),l(e,L),l(e,I),l(I,k),l(k,G),l(I,V),l(I,y),Y(y,u[2]),l(e,P),l(e,v),l(v,B),l(B,M),l(v,F),l(v,R),Y(R,u[3]),l(e,d),l(e,C),l(C,g),l(g,N),X=!0,K||(j=[Q(p,"input",u[15]),Q(y,"input",u[16]),Q(R,"input",u[17]),Q(e,"submit",Le(u[8]))],K=!0)},p(m,E){m[6]?T?(T.p(m,E),E&64&&W(T,1)):(T=Ee(m),T.c(),W(T,1),T.m(e,r)):T&&(ae(),J(T,1,1,()=>{T=null}),ne()),E&2&&p.value!==m[1]&&Y(p,m[1]),E&4&&y.value!==m[2]&&Y(y,m[2]),E&8&&R.value!==m[3]&&Y(R,m[3])},i(m){X||(W(T),U||Te(()=>{U=Ie(e,Re,{}),U.start()}),X=!0)},o(m){J(T),X=!1},d(m){m&&a(e),T&&T.d(),K=!1,pe(j)}}}function He(u){let e,r,t,s,i,f,n,b,o,p,L,I,k,G,V,y,P,v,B,M,F,R,d,C,g=u[6]&&ve(u);return{c(){e=h("form"),g&&g.c(),r=O(),t=h("h4"),s=S("Login"),i=O(),f=h("p"),n=h("label"),b=S("Email"),o=O(),p=h("input"),L=O(),I=h("p"),k=h("label"),G=S("Password"),V=O(),y=h("input"),P=O(),v=h("p"),B=h("button"),M=S("Login"),this.h()},l(N){e=_(N,"FORM",{});var U=w(e);g&&g.l(U),r=A(U),t=_(U,"H4",{});var X=w(t);s=D(X,"Login"),X.forEach(a),i=A(U),f=_(U,"P",{});var K=w(f);n=_(K,"LABEL",{for:!0});var j=w(n);b=D(j,"Email"),j.forEach(a),o=A(K),p=_(K,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0}),K.forEach(a),L=A(U),I=_(U,"P",{});var T=w(I);k=_(T,"LABEL",{for:!0});var m=w(k);G=D(m,"Password"),m.forEach(a),V=A(T),y=_(T,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0}),T.forEach(a),P=A(U),v=_(U,"P",{});var E=w(v);B=_(E,"BUTTON",{type:!0,class:!0});var q=w(B);M=D(q,"Login"),q.forEach(a),E.forEach(a),U.forEach(a),this.h()},h(){c(n,"for","l-email"),c(p,"type","email"),c(p,"class","w3-input w3-border"),c(p,"placeholder","Enter your email"),c(p,"id","l-email"),c(k,"for","l-password"),c(y,"type","password"),c(y,"class","w3-input w3-border"),c(y,"placeholder","Enter your password"),c(y,"id","l-password"),c(B,"type","submit"),c(B,"class","w3-button w3-blue")},m(N,U){H(N,e,U),g&&g.m(e,null),l(e,r),l(e,t),l(t,s),l(e,i),l(e,f),l(f,n),l(n,b),l(f,o),l(f,p),Y(p,u[4]),l(e,L),l(e,I),l(I,k),l(k,G),l(I,V),l(I,y),Y(y,u[5]),l(e,P),l(e,v),l(v,B),l(B,M),R=!0,d||(C=[Q(p,"input",u[13]),Q(y,"input",u[14]),Q(e,"submit",Le(u[7]))],d=!0)},p(N,U){N[6]?g?(g.p(N,U),U&64&&W(g,1)):(g=ve(N),g.c(),W(g,1),g.m(e,r)):g&&(ae(),J(g,1,1,()=>{g=null}),ne()),U&16&&p.value!==N[4]&&Y(p,N[4]),U&32&&y.value!==N[5]&&Y(y,N[5])},i(N){R||(W(g),F||Te(()=>{F=Ie(e,Re,{}),F.start()}),R=!0)},o(N){J(g),R=!1},d(N){N&&a(e),g&&g.d(),d=!1,pe(C)}}}function Ee(u){let e,r;return e=new Ne({props:{message:u[6]}}),{c(){de(e.$$.fragment)},l(t){he(e.$$.fragment,t)},m(t,s){_e(e,t,s),r=!0},p(t,s){const i={};s&64&&(i.message=t[6]),e.$set(i)},i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){J(e.$$.fragment,t),r=!1},d(t){me(e,t)}}}function ve(u){let e,r;return e=new Ne({props:{message:u[6]}}),{c(){de(e.$$.fragment)},l(t){he(e.$$.fragment,t)},m(t,s){_e(e,t,s),r=!0},p(t,s){const i={};s&64&&(i.message=t[6]),e.$set(i)},i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){J(e.$$.fragment,t),r=!1},d(t){me(e,t)}}}function We(u){let e,r,t,s;const i=[Ge,Ve],f=[];function n(b,o){return 0}return r=n(),t=f[r]=i[r](u),{c(){e=h("div"),t.c(),this.h()},l(b){e=_(b,"DIV",{class:!0,style:!0});var o=w(e);t.l(o),o.forEach(a),this.h()},h(){c(e,"class","w3-card-4"),le(e,"width","40%"),le(e,"margin","1rem auto")},m(b,o){H(b,e,o),f[r].m(e,null),s=!0},p(b,[o]){t.p(b,o)},i(b){s||(W(t),s=!0)},o(b){J(t),s=!1},d(b){b&&a(e),f[r].d()}}}function je(u,e,r){ye(te,d=>{d?(d.uid,oe("/chat")):oe("/")});const t=Ue(),s=new ie;let i="",f="",n="",b="yohandentzki@gmail.com",o="000000",{authMode:p="register"}=e,L=null;function I(){if(!b||!o){r(6,L="Fill out all fields!"),r(5,o="");return}r(6,L=""),Be(te,b,o).then(d=>{t("done"),t("auth"),d.user,r(4,b=""),r(5,o="")}).catch(d=>{const C=d.code,g=d.message;r(5,o=""),r(6,L=`(${C}) ${g}`)})}function k(){if(!i||!f||!n){r(6,L="Fill out all fields!");return}if(f!==n){r(6,L="Passwords don't match!");return}r(6,L=""),Ae(te,i,f).then(d=>{t("done"),t("auth"),r(1,i=""),r(2,f=""),r(3,n="")}).catch(d=>{const C=d.code,g=d.message;r(6,L=`(${C}) ${g}`),r(2,f=""),r(3,n="")})}function G(){Ce(te).then(()=>{t("done"),t("logout")}).catch(d=>{throw new Error(d)})}function V(){Oe(te,s).then(d=>{ie.credentialFromResult(d).accessToken,d.user,t("auth"),t("done")}).catch(d=>{const C=d.code,g=d.message;d.email,ie.credentialFromError(d),r(6,L=`(${C}) ${g}`)})}const y=()=>r(0,p="login"),P=()=>r(0,p="register");function v(){b=this.value,r(4,b)}function B(){o=this.value,r(5,o)}function M(){i=this.value,r(1,i)}function F(){f=this.value,r(2,f)}function R(){n=this.value,r(3,n)}return u.$$set=d=>{"authMode"in d&&r(0,p=d.authMode)},[p,i,f,n,b,o,L,I,k,G,V,y,P,v,B,M,F,R]}class qe extends ue{constructor(e){super();ce(this,e,je,We,fe,{authMode:0})}}function ke(u){let e,r,t,s,i,f,n,b;return n=new qe({}),n.$on("auth",u[1]),{c(){e=h("h1"),r=S("Serverless Chat"),t=O(),s=h("p"),i=S("Please log in"),f=O(),de(n.$$.fragment),this.h()},l(o){e=_(o,"H1",{class:!0});var p=w(e);r=D(p,"Serverless Chat"),p.forEach(a),t=A(o),s=_(o,"P",{class:!0});var L=w(s);i=D(L,"Please log in"),L.forEach(a),f=A(o),he(n.$$.fragment,o),this.h()},h(){c(e,"class","w3-jumbo w3-center"),c(s,"class","w3-large w3-center")},m(o,p){H(o,e,p),l(e,r),H(o,t,p),H(o,s,p),l(s,i),H(o,f,p),_e(n,o,p),b=!0},p:re,i(o){b||(W(n.$$.fragment,o),b=!0)},o(o){J(n.$$.fragment,o),b=!1},d(o){o&&a(e),o&&a(t),o&&a(s),o&&a(f),me(n,o)}}}function ze(u){let e,r,t=u[0]&&ke(u);return{c(){t&&t.c(),e=ge()},l(s){t&&t.l(s),e=ge()},m(s,i){t&&t.m(s,i),H(s,e,i),r=!0},p(s,[i]){s[0]?t?(t.p(s,i),i&1&&W(t,1)):(t=ke(s),t.c(),W(t,1),t.m(e.parentNode,e)):t&&(ae(),J(t,1,1,()=>{t=null}),ne())},i(s){r||(W(t),r=!0)},o(s){J(t),r=!1},d(s){t&&t.d(s),s&&a(e)}}}function Je(u,e,r){let t=!1;return Me(()=>{ye(te,i=>{i?(console.log("user found"),i.uid,oe("/chat")):r(0,t=!0)})}),[t,()=>oe("/chat")]}class Ye extends ue{constructor(e){super();ce(this,e,Je,ze,fe,{})}}export{Ye as default};
